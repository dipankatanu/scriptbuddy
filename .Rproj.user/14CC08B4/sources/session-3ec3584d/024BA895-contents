# --- MUST be run inside the ScriptBuddy project session ---
getwd()

# 1) Create standard package folders
dir.create("R", showWarnings = FALSE)
dir.create("man", showWarnings = FALSE)

# 2) DESCRIPTION (minimal but valid)
desc <- c(
  "Package: scriptbuddy",
  "Type: Package",
  "Title: One-click dependency detector and installer for R scripts",
  "Version: 0.0.0.9000",
  "Authors@R: c(person(\"Dipanka\", \"Tanu\", role = c(\"aut\", \"cre\"), email = \"dipanka@example.com\"))",
  "Description: ScriptBuddy scans R scripts or project folders to detect required packages,",
  "    classifies them as CRAN or Bioconductor, and installs them with minimal prompts.",
  "License: MIT + file LICENSE",
  "Encoding: UTF-8",
  "Roxygen: list(markdown = TRUE)",
  "RoxygenNote: 7.3.2",
  "Imports: utils"
)
writeLines(desc, "DESCRIPTION")

# 3) LICENSE (MIT template pointer used by CRAN-style MIT + file)
writeLines(c(
  "YEAR: 2026",
  "COPYRIGHT HOLDER: Dipanka Tanu"
), "LICENSE")

# 4) README (simple placeholder)
writeLines(c(
  "# scriptbuddy",
  "",
  "ScriptBuddy scans R scripts/projects to detect required packages and can install them in one step.",
  "",
  "## Usage",
  "```r",
  "library(scriptbuddy)",
  "scriptbuddy(\"analysis.R\", install = FALSE)",
  "```"
), "README.md")

# 5) .Rbuildignore (ignore RStudio project files)
writeLines(c(
  "^.*\\.Rproj$",
  "^\\.Rproj\\.user$"
), ".Rbuildignore")

# 6) Minimal NAMESPACE for now (we'll overwrite with roxygen later if you want)
writeLines(c(
  "export(scan_deps)",
  "export(classify_deps)",
  "export(install_deps)",
  "export(scriptbuddy)"
), "NAMESPACE")
